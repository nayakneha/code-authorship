CAHOME=${CAHOME:-$HOME/School/amir-security/code-authorship}
RESULTS="$CAHOME/experiments/results"
CADATA=${CADATA:-$HOME/Downloads}

RESULTS_PATH=${RESULTS}/ablation_exclude.txt

echo $CAHOME
echo $RESULTS
echo $CADATA

cd $CAHOME

TOKEN_TYPES=(
'OP,OP'
'OP,STRING'
'NAME,OP'
'NAME,NAME'
'NAME,NEWLINE'
'NAME,NUMBER'
'NAME,NL'
'NAME,STRING'
'NEWLINE,OP'
'NEWLINE,NEWLINE'
'NEWLINE,NUMBER'
'NEWLINE,NL'
'NEWLINE,STRING'
'NUMBER,OP'
'NUMBER,NUMBER'
'NUMBER,STRING'
'INDENT,OP'
'INDENT,NAME'
'INDENT,NEWLINE'
'INDENT,NUMBER'
'INDENT,INDENT'
'INDENT,NL'
'INDENT,STRING'
'DEDENT,OP'
'DEDENT,NAME'
'DEDENT,NEWLINE'
'DEDENT,NUMBER'
'DEDENT,INDENT'
'DEDENT,DEDENT'
'DEDENT,NL'
'DEDENT,STRING'
'DEDENT,ENCODING'
'DEDENT,ENDMARKER'
'DEDENT,ERRORTOKEN'
'NL,OP'
'NL,NUMBER'
'NL,NL'
'NL,STRING'
'STRING,STRING'
'COMMENT,OP'
'COMMENT,NAME'
'COMMENT,NEWLINE'
'COMMENT,NUMBER'
'COMMENT,INDENT'
'COMMENT,DEDENT'
'COMMENT,NL'
'COMMENT,STRING'
'COMMENT,COMMENT'
'COMMENT,ENCODING'
'COMMENT,ENDMARKER'
'COMMENT,ERRORTOKEN'
'ENCODING,OP'
'ENCODING,NAME'
'ENCODING,NEWLINE'
'ENCODING,NUMBER'
'ENCODING,INDENT'
'ENCODING,NL'
'ENCODING,STRING'
'ENCODING,ENCODING'
'ENCODING,ENDMARKER'
'ENCODING,ERRORTOKEN'
'ENDMARKER,OP'
'ENDMARKER,NAME'
'ENDMARKER,NEWLINE'
'ENDMARKER,NUMBER'
'ENDMARKER,INDENT'
'ENDMARKER,NL'
'ENDMARKER,STRING'
'ENDMARKER,ENDMARKER'
'ENDMARKER,ERRORTOKEN'
'ERRORTOKEN,OP'
'ERRORTOKEN,NAME'
'ERRORTOKEN,NEWLINE'
'ERRORTOKEN,NUMBER'
'ERRORTOKEN,INDENT'
'ERRORTOKEN,NL'
'ERRORTOKEN,STRING'
'ERRORTOKEN,ERRORTOKEN'
)

DATAPATH=$CADATA/gcj-py-2014.jsonl

echo begin > $RESULTS_PATH

for TT1 in "${TOKEN_TYPES[@]}"
do
        echo $TT1
        python codeauthorship/scripts/train_multilang.py \
            --exclude_type $TT1 \
            --path_py $DATAPATH \
            --n_estimators 100 --max_features 2500 --json_result >> $RESULTS_PATH  2>&1
done
